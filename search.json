[{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"checks-and-definitions","dir":"Articles","previous_headings":"","what":"Checks and definitions","title":"aircraft-pfp","text":"check altitude, intake_height, altitude_final elevation. altitude_final column intake_height, added match column obs_read text files. temporal range data also check dimensions data","code":"north <- 80 south <- 10 west <- -170 east <- -50 max_altitude <- 8000 yy <- 2020 df[, c(\"altitude\", \"altitude_final\", \"intake_height\", \"elevation\")] altitude altitude_final intake_height elevation           <num>          <num>         <num>     <num>     1:  4758.10        4758.10       4548.10       210     2:  3801.47        3801.47       3591.47       210     3:  3170.38        3170.38       2960.38       210     4:  2539.71        2539.71       2329.71       210     5:  1905.77        1905.77       1695.77       210    ---                                                 86429:  3698.75        3698.75       3457.75       241 86430:  3068.42        3068.42       2831.42       237 86431:  2417.67        2417.67       2183.67       234 86432:  1793.14        1793.14       1580.14       213 86433:  1173.48        1173.48        950.48       223 range(df$year) [1] 1992 2021 dim(df) [1] 86433    61"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"filters","dir":"Articles","previous_headings":"","what":"Filters","title":"aircraft-pfp","text":"","code":"df <- df[year == yy]  df <- df[altitude_final < max_altitude &            latitude < north &            latitude > south &            longitude < east &            longitude > west] dim(df) [1] 2872   61"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"adding-time-as-posixct-class","dir":"Articles","previous_headings":"","what":"Adding time as POSIXct class","title":"aircraft-pfp","text":"","code":"df <- obs_addtime(df) df[, \"timeUTC\"] timeUTC                    <POSc>    1: 2020-01-02 19:50:20    2: 2020-01-02 19:59:18    3: 2020-01-02 20:08:11    4: 2020-01-02 20:16:34    5: 2020-01-02 20:23:47   ---                     2868: 2020-12-28 20:21:43 2869: 2020-12-28 20:23:59 2870: 2020-12-28 20:26:07 2871: 2020-12-28 20:28:09 2872: 2020-12-28 20:30:23"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"cut-time","dir":"Articles","previous_headings":"","what":"Cut time","title":"aircraft-pfp","text":"now can cut time every 20 seconds. can chosse frequency well.","code":"df$sec2 <- obs_freq(x = df$second,                      freq = seq(0, 59, 20)) df[, c(\"second\", \"sec2\")] second  sec2        <int> <num>    1:     20     0    2:     18     0    3:     11     0    4:     34    20    5:     47    40   ---              2868:     43    40 2869:     59    40 2870:      7     0 2871:      9     0 2872:     23    20"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"aggregate-data","dir":"Articles","previous_headings":"","what":"Aggregate data","title":"aircraft-pfp","text":"now need add column key_time, used aggregate variables","code":"df$key_time <- ISOdatetime(year = df$year,                            month = df$month,                            day = df$day,                            hour = df$hour,                            min = df$minute,                            sec = df$sec2,                            tz = \"UTC\") df[, c(\"timeUTC\", \"key_time\")] timeUTC            key_time                    <POSc>              <POSc>    1: 2020-01-02 19:50:20 2020-01-02 19:50:00    2: 2020-01-02 19:59:18 2020-01-02 19:59:00    3: 2020-01-02 20:08:11 2020-01-02 20:08:00    4: 2020-01-02 20:16:34 2020-01-02 20:16:20    5: 2020-01-02 20:23:47 2020-01-02 20:23:40   ---                                         2868: 2020-12-28 20:21:43 2020-12-28 20:21:40 2869: 2020-12-28 20:23:59 2020-12-28 20:23:40 2870: 2020-12-28 20:26:07 2020-12-28 20:26:00 2871: 2020-12-28 20:28:09 2020-12-28 20:28:00 2872: 2020-12-28 20:30:23 2020-12-28 20:30:20 df2 <- obs_agg(df, cols =  c(\"year\",                              \"month\",                              \"day\",                              \"hour\",                              \"minute\",                              \"second\",                              \"time\",                              \"time_decimal\",                              \"value\",                              \"latitude\",                              \"longitude\",                              \"altitude_final\",                              \"elevation\",                              \"intake_height\",                              \"gps_altitude\",                              \"pressure\",                              \"pressure_altitude\",                              \"u\", \"v\", \"temperature\",                              \"type_altitude\"))"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"add-local-time","dir":"Articles","previous_headings":"","what":"Add local time","title":"aircraft-pfp","text":"Now add local time","code":"df3 <- obs_addltime(df2) setorderv(df3, cols = c(\"site_code\", \"timeUTC\"),           order = c(-1, 1)) df3 timeUTC site_code lab_1_abbr dataset_calibration_scale  year month    day  hour                    <POSc>    <char>     <char>                    <char> <int> <int> <char> <int>    1: 2020-01-14 18:28:20       WBI       NOAA            WMO CH4 X2004A  2020     1     14    18    2: 2020-01-14 18:33:00       WBI       NOAA            WMO CH4 X2004A  2020     1     14    18    3: 2020-01-14 18:37:40       WBI       NOAA            WMO CH4 X2004A  2020     1     14    18    4: 2020-01-14 18:40:40       WBI       NOAA            WMO CH4 X2004A  2020     1     14    18    5: 2020-01-14 18:43:20       WBI       NOAA            WMO CH4 X2004A  2020     1     14    18   ---                                                                                             2868: 2020-12-25 21:09:20       CAR       NOAA            WMO CH4 X2004A  2020    12     25    21 2869: 2020-12-25 21:20:20       CAR       NOAA            WMO CH4 X2004A  2020    12     25    21 2870: 2020-12-25 21:27:20       CAR       NOAA            WMO CH4 X2004A  2020    12     25    21 2871: 2020-12-25 21:33:00       CAR       NOAA            WMO CH4 X2004A  2020    12     25    21 2872: 2020-12-25 21:35:40       CAR       NOAA            WMO CH4 X2004A  2020    12     25    21       minute second       time time_decimal       value latitude longitude altitude_final elevation        <int>  <int>      <num>        <num>       <num>    <num>     <num>          <num>     <num>    1:     28     20 1579026500     2020.038 1.91295e-06  41.7505  -91.0213        7618.48       242    2:     33      0 1579026780     2020.038 1.92525e-06  41.7427  -91.1791        6958.89       234    3:     37     40 1579027060     2020.038 1.92408e-06  41.7232  -91.3675        5685.43       236    4:     40     40 1579027240     2020.038 1.91808e-06  41.7275  -91.4877        4987.14       244    5:     43     20 1579027400     2020.038 1.92311e-06  41.7177  -91.5966        4333.95       235   ---                                                                                               2868:      9     20 1608930560     2020.983 1.93444e-06  40.7275 -104.6853        2926.69      1559 2869:     20     20 1608931220     2020.983 1.93578e-06  40.7813 -104.6506        2453.94      1590 2870:     27     20 1608931640     2020.983 1.93419e-06  40.7955 -104.6787        2138.78      1599 2871:     33      0 1608931980     2020.983 1.93514e-06  40.6879 -104.6850        1832.76      1543 2872:     35     40 1608932140     2020.983 2.00509e-06  40.7908 -104.6855        1668.78      1614       intake_height gps_altitude pressure pressure_altitude     u     v temperature type_altitude               <num>        <num>    <num>             <num> <num> <num>       <num>         <num>    1:       7376.48          NaN      NaN               NaN   NaN   NaN         NaN             1    2:       6724.89          NaN      NaN               NaN   NaN   NaN         NaN             1    3:       5449.43          NaN      NaN               NaN   NaN   NaN         NaN             1    4:       4743.14          NaN      NaN               NaN   NaN   NaN         NaN             1    5:       4098.95          NaN      NaN               NaN   NaN   NaN         NaN             1   ---                                                                                             2868:       1367.69          NaN      NaN               NaN   NaN   NaN         NaN             1 2869:        863.94          NaN      NaN               NaN   NaN   NaN         NaN             1 2870:        539.78          NaN      NaN               NaN   NaN   NaN         NaN             1 2871:        289.76          NaN      NaN               NaN   NaN   NaN         NaN             1 2872:         54.78          NaN      NaN               NaN   NaN   NaN         NaN             1                local_time    lh                    <POSc> <int>    1: 2020-01-14 12:24:14    12    2: 2020-01-14 12:28:17    12    3: 2020-01-14 12:32:11    12    4: 2020-01-14 12:34:42    12    5: 2020-01-14 12:36:56    12   ---                           2868: 2020-12-25 14:10:35    14 2869: 2020-12-25 14:21:43    14 2870: 2020-12-25 14:28:37    14 2871: 2020-12-25 14:34:15    14 2872: 2020-12-25 14:36:55    14"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"master","dir":"Articles","previous_headings":"","what":"Master","title":"aircraft-pfp","text":"generating receptors list, databe required information may replace missing values nine nines. commented #master[.na(master)] <- 999999999 transform time variables character round coordinates 4 digits","code":"master <- df3 master$timeUTC <- as.character(master$timeUTC) master$local_time <- as.character(master$local_time) master$latitude <- round(master$latitude, 4) master$longitude <- round(master$longitude, 4)"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"save-master","dir":"Articles","previous_headings":"","what":"Save master","title":"aircraft-pfp","text":"Finally save master file","code":"out <- tempfile()"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"txt","dir":"Articles","previous_headings":"Save master","what":"txt","title":"aircraft-pfp","text":"","code":"message(paste0(out,\"_\", datasetid, \".txt\\n\")) fwrite(master,        paste0(out,\"_\", datasetid, \".txt\"),        sep = \" \")"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"csv","dir":"Articles","previous_headings":"Save master","what":"csv","title":"aircraft-pfp","text":"","code":"message(paste0(out,\"_\", datasetid, \".csv\\n\")) fwrite(master,        paste0(out,\"_\", datasetid, \".csv\"),        sep = \",\")"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"csvy","dir":"Articles","previous_headings":"Save master","what":"csvy","title":"aircraft-pfp","text":"CSVY csv files YAML header include metadata tabulated text files","code":"cat(\"\\nAdding notes in csvy:\\n\") notes <- c(paste0(\"sector: \", datasetid),            paste0(\"timespan: \", yy),            paste0(\"spatial_limits: north = \", north, \", south = \", south, \", east = \", east, \", west = \", west),            \"data: Data averaged every 20 seconds\",            paste0(\"altitude: < \", max_altitude),            \"hours: All\",            \"local_time: if var `site_utc2lst` is not available, calculated as\",            \"longitude/15*60*60 (John Miller)\")  cat(notes, sep = \"\\n\")  message(paste0(out,\"_\", datasetid, \".csvy\\n\")) obs_write_csvy(dt = master,                notes = notes,                out = paste0(out,\"_\", datasetid, \".csvy\")) sector: aircraft-pfp timespan: 2020 spatial_limits: north = 80, south = 10, east = -50, west = -170 data: Data averaged every 20 seconds altitude: < 8000 hours: All local_time: if var `site_utc2lst` is not available, calculated as longitude/15*60*60 (John Miller) obs_read_csvy(paste0(out,\"_\", datasetid, \".csvy\")) [1] \"---\"                                                                  [2] \"name: Metadata \"                                                      [3] \"sector: aircraft-pfp\"                                                 [4] \"timespan: 2020\"                                                       [5] \"spatial_limits: north = 80, south = 10, east = -50, west = -170\"      [6] \"data: Data averaged every 20 seconds\"                                 [7] \"altitude: < 8000\"                                                     [8] \"hours: All\"                                                           [9] \"local_time: if var `site_utc2lst` is not available, calculated as\"   [10] \"longitude/15*60*60 (John Miller)\"                                    [11] \"structure: \"                                                         [12] \"Classes ‘data.table’ and 'data.frame':\\t2872 obs. of  27 variables:\" [13] \" $ timeUTC                  : chr  \\\"2020-01-14 18:28:20\\\" \\\"..\"     [14] \" $ site_code                : chr  \\\"WBI\\\" \\\"WBI\\\" ...\"              [15] \" $ lab_1_abbr               : chr  \\\"NOAA\\\" \\\"NOAA\\\" ...\"            [16] \" $ dataset_calibration_scale: chr  \\\"WMO CH4 X2004A\\\" \\\"WMO \\\"..\"    [17] \" $ year                     : int  2020 2020 2020 2020 202..\"        [18] \" $ month                    : int  1 1 1 1 1 ...\"                    [19] \" $ day                      : chr  \\\"14\\\" \\\"14\\\" ...\"                [20] \" $ hour                     : int  18 18 18 18 18 ...\"               [21] \" $ minute                   : int  28 33 37 40 43 ...\"               [22] \" $ second                   : int  20 0 40 40 20 ...\"                [23] \" $ time                     : num  1.58e+09 1.58e+09 ...\"            [24] \" $ time_decimal             : num  2020 2020 ...\"                    [25] \" $ value                    : num  1.91e-06 1.93e-06 ...\"            [26] \" $ latitude                 : num  41.8 41.7 ...\"                    [27] \" $ longitude                : num  -91 -91.2 ...\"                    [28] \" $ altitude_final           : num  7618 6959 ...\"                    [29] \" $ elevation                : num  242 234 236 244 235 ...\"          [30] \" $ intake_height            : num  7376 6725 ...\"                    [31] \" $ gps_altitude             : num  NaN NaN NaN NaN NaN ...\"          [32] \" $ pressure                 : num  NaN NaN NaN NaN NaN ...\"          [33] \" $ pressure_altitude        : num  NaN NaN NaN NaN NaN ...\"          [34] \" $ u                        : num  NaN NaN NaN NaN NaN ...\"          [35] \" $ v                        : num  NaN NaN NaN NaN NaN ...\"          [36] \" $ temperature              : num  NaN NaN NaN NaN NaN ...\"          [37] \" $ type_altitude            : num  1 1 1 1 1 ...\"                    [38] \" $ local_time               : chr  \\\"2020-01-14 12:24:14.8\\\"..\"      [39] \" $ lh                       : int  12 12 12 12 12 ...\"               [40] \" - attr(*, \\\".internal.selfref\\\")=<externalptr> \"                    [41] \"NULL\"                                                                [42] \"---\"                                                                                   timeUTC site_code lab_1_abbr dataset_calibration_scale  year month   day  hour                    <POSc>    <char>     <char>                    <char> <int> <int> <int> <int>    1: 2020-01-14 18:28:20       WBI       NOAA            WMO CH4 X2004A  2020     1    14    18    2: 2020-01-14 18:33:00       WBI       NOAA            WMO CH4 X2004A  2020     1    14    18    3: 2020-01-14 18:37:40       WBI       NOAA            WMO CH4 X2004A  2020     1    14    18    4: 2020-01-14 18:40:40       WBI       NOAA            WMO CH4 X2004A  2020     1    14    18    5: 2020-01-14 18:43:20       WBI       NOAA            WMO CH4 X2004A  2020     1    14    18   ---                                                                                            2868: 2020-12-25 21:09:20       CAR       NOAA            WMO CH4 X2004A  2020    12    25    21 2869: 2020-12-25 21:20:20       CAR       NOAA            WMO CH4 X2004A  2020    12    25    21 2870: 2020-12-25 21:27:20       CAR       NOAA            WMO CH4 X2004A  2020    12    25    21 2871: 2020-12-25 21:33:00       CAR       NOAA            WMO CH4 X2004A  2020    12    25    21 2872: 2020-12-25 21:35:40       CAR       NOAA            WMO CH4 X2004A  2020    12    25    21       minute second       time time_decimal       value latitude longitude altitude_final elevation        <int>  <int>      <int>        <num>       <num>    <num>     <num>          <num>     <int>    1:     28     20 1579026500     2020.038 1.91295e-06  41.7505  -91.0213        7618.48       242    2:     33      0 1579026780     2020.038 1.92525e-06  41.7427  -91.1791        6958.89       234    3:     37     40 1579027060     2020.038 1.92408e-06  41.7232  -91.3675        5685.43       236    4:     40     40 1579027240     2020.038 1.91808e-06  41.7275  -91.4877        4987.14       244    5:     43     20 1579027400     2020.038 1.92311e-06  41.7177  -91.5966        4333.95       235   ---                                                                                               2868:      9     20 1608930560     2020.983 1.93444e-06  40.7275 -104.6853        2926.69      1559 2869:     20     20 1608931220     2020.983 1.93578e-06  40.7813 -104.6506        2453.94      1590 2870:     27     20 1608931640     2020.983 1.93419e-06  40.7955 -104.6787        2138.78      1599 2871:     33      0 1608931980     2020.983 1.93514e-06  40.6879 -104.6850        1832.76      1543 2872:     35     40 1608932140     2020.983 2.00509e-06  40.7908 -104.6855        1668.78      1614       intake_height gps_altitude pressure pressure_altitude      u      v temperature type_altitude               <num>       <lgcl>   <lgcl>            <lgcl> <lgcl> <lgcl>      <lgcl>         <int>    1:       7376.48           NA       NA                NA     NA     NA          NA             1    2:       6724.89           NA       NA                NA     NA     NA          NA             1    3:       5449.43           NA       NA                NA     NA     NA          NA             1    4:       4743.14           NA       NA                NA     NA     NA          NA             1    5:       4098.95           NA       NA                NA     NA     NA          NA             1   ---                                                                                               2868:       1367.69           NA       NA                NA     NA     NA          NA             1 2869:        863.94           NA       NA                NA     NA     NA          NA             1 2870:        539.78           NA       NA                NA     NA     NA          NA             1 2871:        289.76           NA       NA                NA     NA     NA          NA             1 2872:         54.78           NA       NA                NA     NA     NA          NA             1                local_time    lh                    <POSc> <int>    1: 2020-01-14 12:24:14    12    2: 2020-01-14 12:28:17    12    3: 2020-01-14 12:32:11    12    4: 2020-01-14 12:34:42    12    5: 2020-01-14 12:36:56    12   ---                           2868: 2020-12-25 14:10:35    14 2869: 2020-12-25 14:21:43    14 2870: 2020-12-25 14:28:37    14 2871: 2020-12-25 14:34:15    14 2872: 2020-12-25 14:36:55    14"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"receptors","dir":"Articles","previous_headings":"","what":"Receptors","title":"aircraft-pfp","text":"Now can last step generating receptor list files. Now filter selected columns can round altitude also Now can format time variables two digits column indicate AGL ASL Finally, save receptors","code":"receptor <- master[, c(\"site_code\",                        \"year\",                        \"month\",                        \"day\",                        \"hour\",                        \"minute\",                        \"second\",                        \"latitude\",                        \"longitude\",                        \"altitude_final\",                        \"type_altitude\")] receptor$altitude_final <- round(receptor$altitude_final) receptor <- obs_format(receptor,                         spf =  c(\"month\", \"day\",                                  \"hour\", \"minute\", \"second\")) receptor_agl <- receptor[type_altitude == 0] receptor_asl <- receptor[type_altitude == 1] if(nrow(receptor_agl) > 0) {   message(paste0(out, \"_\", datasetid, \"_receptor_AGL.txt\"), \"\\n\")    fwrite(x = receptor_agl,          file = paste0(out, \"_\", datasetid, \"_receptor_AGL.txt\"),          sep = \" \") }  if(nrow(receptor_asl) > 0) {   message(paste0(out, \"_\", datasetid, \"_receptor_ASL.txt\"), \"\\n\")    fwrite(x = receptor_asl,          file = paste0(out, \"_\", datasetid, \"receptor_ASL.txt\"),          sep = \" \")  } C:\\Users\\sibarrae\\AppData\\Local\\Temp\\RtmpwRaR0p\\fileb40858be6976_aircraft-pfp_receptor_ASL.txt"},{"path":"https://noaa-gml.github.io/rtorf/articles/aircraft-pfp.html","id":"plot","dir":"Articles","previous_headings":"","what":"Plot","title":"aircraft-pfp","text":"Finally, just plot data, run locally","code":"obs_plot(df3, time = \"timeUTC\", yfactor = 1e9) Found the following sites:   [1] WBI THD TGC SGP SCA PFA NHA LEF HIL ETL ESP CMA CAR Plotting the following sites:  [1] WBI THD"},{"path":"https://noaa-gml.github.io/rtorf/articles/summary.html","id":"obspack-summary","dir":"Articles","previous_headings":"","what":"ObsPack summary","title":"summary","text":"first step consists constructing summary ObsPack. required read data, also, identify agl, present file names. function returns data.frame. Optionally, user can indicate path store data.frame. obs_summary also prints summary data. second argument categories, default includes categories shown , account files. summary data.frame contains columns id full path file, name name relative path file, n just id, sector tower, column agl indicates agl indicated name file available. read documentation function, user must run ?obs_summary. first define categories can check table now","code":"cate = c(\"aircraft-pfp\",          \"aircraft-insitu\",          \"aircraft-flask\",          \"surface-insitu\",          \"surface-flask\",           \"surface-pfp\",             \"tower-insitu\",            \"aircore\",                 \"shipboard-insitu\",          \"shipboard-flask\")   obs <- \"Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/\" index <- obs_summary(obs = obs,                       categories = cate) Number of files of index: 429               sector     N               <char> <int>  1:     aircraft-pfp    40  2:  aircraft-insitu    15  3:    surface-flask   106  4:   surface-insitu   174  5:   aircraft-flask     4  6:          aircore     1  7:      surface-pfp    33  8:     tower-insitu    51  9:  shipboard-flask     4 10: shipboard-insitu     1 11:    Total sectors   429 Detected 190 files with agl Detected 239 files without agl index 1: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_aao_aircraft-pfp_1_allvalid.nc   2: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_above_aircraft-insitu_1_allvalid.nc   3: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_abp_surface-flask_1_representative.nc   4: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_abt_surface-insitu_6_allvalid.nc   5: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_acg_aircraft-pfp_1_allvalid.nc  ---                                                                                                            425: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_yon_surface-insitu_19_representative.nc 426: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_zep_surface-flask_1_representative.nc 427: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_zep_surface-insitu_442_allvalid-15magl.nc 428: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_zot_surface-flask_45_representative.nc 429: Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/ch4_zsf_surface-insitu_442_allvalid-3magl.nc                                               name     n          sector   agl                                             <char> <int>          <char> <num>   1:            ch4_aao_aircraft-pfp_1_allvalid.nc     1    aircraft-pfp    NA   2:       ch4_above_aircraft-insitu_1_allvalid.nc     2 aircraft-insitu    NA   3:     ch4_abp_surface-flask_1_representative.nc     3   surface-flask    NA   4:          ch4_abt_surface-insitu_6_allvalid.nc     4  surface-insitu    NA   5:            ch4_acg_aircraft-pfp_1_allvalid.nc     5    aircraft-pfp    NA  ---                                                                           425:   ch4_yon_surface-insitu_19_representative.nc   425  surface-insitu    NA 426:     ch4_zep_surface-flask_1_representative.nc   426   surface-flask    NA 427: ch4_zep_surface-insitu_442_allvalid-15magl.nc   427  surface-insitu    15 428:    ch4_zot_surface-flask_45_representative.nc   428   surface-flask    NA"},{"path":"https://noaa-gml.github.io/rtorf/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sergio Ibarra-Espinosa. Author, maintainer. Lei Hu. Contributor.","code":""},{"path":"https://noaa-gml.github.io/rtorf/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Schuldt, et al. Multi-laboratory compilation atmospheric methane data period 1983-2021.NOAA -  Global Monitoring Laboratory, 10.25925/20230301, https://gml.noaa.gov/ccgg/obspack/citation.php,  2014. Ibarra-Espinosa S (2024). rtorf: 'rtorf' Obspack GLOBALView+. R package version 0.9.4, https://noaa-gml.github.io/rtorf/, https://github.com/noaa-gml/rtorf.","code":"@Article{,   title = {Multi-laboratory compilation of atmospheric methane data for the period 1983-2021},   journal = {NOAA -  Global Monitoring Laboratory},   author = {Kenneth N. Schuldt and John Mund and Tuula Aalto and James B. Abshire and Ken Aikin and Grant Allen and Arlyn Andrews and Francesco Apadula and Sabrina Arnold and Bianca Baier and Peter Bakwin and Jakub Bartyzel and Gilles Bentz and Peter Bergamaschi and Andreas Beyersdorf and Tobias Biermann and Sebastien C. Biraud and Pierre-Eric Blanc and Harald Boenisch and David Bowling and Gordon Brailsford and Willi A. Brand and Dominik Brunner and Thao P. Bui and Lukas Bäni and Francescopiero Calzolari and Cecilia S. Chang and Huilin Chen and Gao Chen and Lukasz Chmura and Shane Clark and Sites Climadat and Aurelie Colomb and Roisin Commane and Lino Condori and Franz Conen and Sébastien Conil and Cédric Couret and Paolo Cristofanelli and Emilio Cuevas and Roger Curcoll and Bruce Daube and Kenneth J. Davis and Martine {De Mazière} and Stephan {De Wekker} and Jonathan M. Dean-Day and Julian Della Coletta and Marc Delmotte and Tatiana Di Iorio and Elizabeth DiGangi and Joshua P. DiGangi and Russell Dickerson and James W. Elkins and Michael Elsasser and Lukas Emmenegger and Shuangxi Fang and Marc L. Fischer and Grant Forster and James France and Arnoud Frumau and Marta Fuente-Lastra and Michal Galkowski and Luciana V. Gatti and Torsten Gehrlein and Christoph Gerbig and Francois Gheusi and Emanuel Gloor and Daisuke Goto and Tim Griffis and Samuel Hammer and Thomas F. Hanisco and Chad Hanson and László Haszpra and Juha Hatakka and Martin Heimann and Michal Heliasz and Daniela Heltai and Stephan Henne and Arjan Hensen and Christian Hermans and Ove Hermansen and Eric Hintsa and Antje Hoheisel and Jutta Holst and Laura T. Iraci and Viktor Ivakhov and Daniel A. Jaffe and Armin Jordan and Warren Joubert and Hui-Yun Kang and Anna Karion and Stephan R. Kawa and Victor Kazan and Ralph F. Keeling and Petri Keronen and Jooil Kim and Jörg Klausen and Tobias Kneuer and Mi-Young Ko and Pasi Kolari and Katerina Kominkova and Eric Kort and Elena Kozlova and Paul B. Krummel and Dagmar Kubistin and Susan S. Kulawik and Nicolas Kumps and Casper Labuschagne and David H. Lam and Xin Lan and Ray L. Langenfelds and Andrea Lanza and Olivier Laurent and Tuomas Laurila and Thomas Lauvaux and Jost Lavric and Beverly E. Law and Choong-Hoon Lee and Haeyoung Lee and John Lee and Irene Lehner and Kari Lehtinen and Reimo Leppert and Ari Leskinen and Markus Leuenberger and W.H. Leung and Ingeborg Levin and Janne Levula and John Lin and Matthias Lindauer and Anders Lindroth and Zoe M. Loh and Morgan Lopez and Chris R. Lunder and Mikaell O. Löfvenius and Toshinobu Machida and Ivan Mammarella and Giovanni Manca and Andrew Manning and Alistair Manning and Michal V. Marek and Per Marklund and Josette E. Marrero and Damien Martin and Melissa Y. Martin and Giordane A. Martins and Hidekazu Matsueda and Kathryn McKain and Harro Meijer and Frank Meinhardt and Lynne Merchant and Jean-Marc Metzger and N. Mihalopoulos and Natasha L. Miles and Charles E. Miller and John B. Miller and Logan Mitchell and Vanessa Monteiro and Stephen Montzka and Fred Moore and Heiko Moossen and Eric Morgan and Josep-Anton Morgui and Shinji Morimoto and J. W. Munger and David Munro and Mathew Mutuku and Cathrine L. Myhre and Meelis Mölder and Jennifer Müller-Williams and Shin-Ichiro Nakaoka and Jaroslaw Necki and Sally Newman and Sylvia Nichol and Euan Nisbet and Yosuke Niwa and David M. Njiru and Steffen M. Noe and Yukihiro Nojiri and Simon O'Doherty and Florian Obersteiner and Bill Paplawsky and Caroline L. Parworth and Jeff Peischl and Olli Peltola and Wouter Peters and Carole Philippon and Salvatore Piacentino and Jean M. Pichon and Penelope Pickers and Steve Piper and Joseph Pitt and Christian Plass-Dülmer and Stephen M. Platt and Steve Prinzivalli and Michel Ramonet and Ramon Ramos and Xinrong Ren and Enrique Reyes-Sanchez and Scott J. Richardson and Louis-Jeremy Rigouleau and Haris Riris and Pedro P. Rivas and Michael Rothe and Yves-Alain Roulet and Thomas Ryerson and Ju-Mee Ryoo and Maryann Sargent and Motoki Sasakawa and Bert Scheeren and Martina Schmidt and Tanja Schuck and Marcus Schumacher and Jennifer Seibel and Thomas Seifert and Mahesh K. Sha and Paul Shepson and Michael Shook and Christopher D. Sloop and Paul D. Smith and Gerard Spain and Jason M. St. Clair and David Steger and Martin Steinbacher and Britton Stephens and Colm Sweeney and Lise L. Sørensen and Risto Taipale and Shinya Takatsuji and Pieter Tans and Kirk Thoning and Helder Timas and Margaret Torn and Pamela Trisolino and Jocelyn Turnbull and Alex Vermeulen and Brian Viner and Gabriela Vitkova and Stephen Walker and Andrew Watson and Ray Weiss and Dietmar Weyrauch and Steven C. Wofsy and Justin Worsey and Doug Worthy and Irène Xueref-Remy and Emma L. Yates and Dickon Young and Camille Yver-Kwok and Sönke Zaehle and Andreas Zahn and Christoph Zellweger and Miroslaw Zimnoch and Rodrigo A. {de Souza} and Alcide G. di Sarra and Danielle {van Dinther} and Pim {van den Bulk}},   year = {2024},   url = {https://gml.noaa.gov/ccgg/obspack/citation.php},   doi = {10.25925/20230301}, } @Manual{,   title = {rtorf: 'rtorf' Obspack GLOBALView+},   author = {Sergio Ibarra-Espinosa},   year = {2024},   note = {R package version 0.9.4, https://noaa-gml.github.io/rtorf/},   url = {https://github.com/noaa-gml/rtorf}, }"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"r-tools-for-obspack-receptors-and-footprints-rtorf","dir":"","previous_headings":"","what":"rtorf Obspack GLOBALView+","title":"rtorf Obspack GLOBALView+","text":"NOAA Obspack collection green house gases observations rtorf depends data.table ncdf4, basically parallel C, can installed machine.","code":""},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"rtorf Obspack GLOBALView+","text":"","code":"remotes::install_github(\"noaa-gml/rtorf\") library(rtorf) library(data.table)"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"obspack-summary","dir":"","previous_headings":"","what":"ObsPack summary","title":"rtorf Obspack GLOBALView+","text":"first step consists constructing summary ObsPack. required read data, also, identify agl, present file names. function returns data.frame. Optionally, user can indicate path store data.frame. obs_summary also prints summary data. second argument categories, default includes categories shown , account files. summary data.frame contains columns id full path file, name name relative path file, n just id, sector tower, column agl indicates agl indicated name file available. read documentation function, user must run ?obs_summary. first define categories 429 files ObsPack directory. printed information also shows total bottom, sum individual file sector. ensure sum files equal total number files found, shown top. furthermore, printed information also shows 109 files agl explicitly mentioned name file.","code":"cate = c(\"aircraft-pfp\",          \"aircraft-insitu\",          \"aircraft-flask\",          \"surface-insitu\",          \"surface-flask\",           \"surface-pfp\",             \"tower-insitu\",            \"aircore\",                 \"shipboard-insitu\",          \"shipboard-flask\")   obs <- \"Z:/torf/obspack_ch4_1_GLOBALVIEWplus_v5.1_2023-03-08/data/nc/\" index <- obs_summary(obs = obs, categories = cate) ## Number of files of index: 429 ##               sector     N ##               <char> <int> ##  1:     aircraft-pfp    40 ##  2:  aircraft-insitu    15 ##  3:    surface-flask   106 ##  4:   surface-insitu   174 ##  5:   aircraft-flask     4 ##  6:          aircore     1 ##  7:      surface-pfp    33 ##  8:     tower-insitu    51 ##  9:  shipboard-flask     4 ## 10: shipboard-insitu     1 ## 11:    Total sectors   429 ## Detected 190 files with agl ## Detected 239 files without agl"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"read-data","dir":"","previous_headings":"ObsPack summary","what":"Read data","title":"rtorf Obspack GLOBALView+","text":"summary built, function obs_read read files available index file previously generated. selected category “tower-insitu”. argument verbose prints files read time, default. end, function prints total number observations type altitude (agl asl). intake_height altitude_final identification altitude type critical. approach used consists : Use intake_height Identify agl name tile. agl present, agl = altitude - site_elevation. NA elevation, result NA agl new column added named altitude_final store agl asl Another column named type_altitude added identify agl 0, asl 1. maintain coherent approach among text NetCDF files, add column altitude_final type_altitude. done obs_read_nc obs_read. Sometimes need information site. instance, observations start end. , added function obs_table, calculates statistics summary “time” numeric variables file name, sector, site, altitude mode. Now can visualize average observations site. (run locally) Let us randomly select couples sites database. added function plot data read ObsPack. y-axis field value x-axis default time. data illustrated sorted color field site_code, default number 3 sites. argument pal define color palette, used internally imported function cptcity::cpt. (run locally) can see 2.61 million observations tower-insitu. observations made 2004 2021.","code":"df <- obs_read_nc(   index = index,   categories = \"tower-insitu\") dft <- obs_table(df = df) library(sf) sdft <- st_as_sf(dft[stat == \"mean\"],                   coords = c(\"longitude\", \"latitude\"),                   crs = 4326) sdft$value <- sdft$value*1e09 plot(sdft[\"value\"],       reset = FALSE,       axes = TRUE,       graticule = TRUE,      pch = 16,       cex = 1.5,       pal = cptcity::lucky(colorRampPalette = T), #random      main = NULL) maps::map(add = T) usites <- unique(df$site_name)[sample(seq_along(unique(df$site_name)), 2)] usites ## [1] \"Carbon in Arctic Reservoirs Vulnerability Experiment (CARVE)\" ## [2] \"Noyabrsk\" knitr::kable(dft[site_name %in% usites]) obs_plot(dt = df[site_name %in% usites], time = \"time\", yfactor = 1e+09, cex = 0.5,     verbose = FALSE)"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"filtering","dir":"","previous_headings":"ObsPack summary","what":"Filtering","title":"rtorf Obspack GLOBALView+","text":"ObsPack includes global observations sometimes need extract data specific region periods time. part include spatial temporal parameters filter data. year interest 2020, also included December 2019 January 2021. stage, can apply spatial filter using coordinates. filtering space time, 1.12883^{5} million observations. Towers can observations different heights. need select one site observations registered highest height. column height named altitude_final max altitude named max_altitude.","code":"north <- 80 south <- 10 west <- -170 east <- -50 max_altitude <- 8000 evening <- 14  yy <- 2020 df <- rbind(df[year == yy - 1 & month == 12],             df[year == yy],             df[year == yy + 1 & month == 1])  df <- df[altitude_final < max_altitude &            latitude < north &            latitude > south &            longitude < east &            longitude > west]  unique(df[, c(\"altitude_final\",                \"site_elevation\",               \"elevation\",               \"dataset_selection_tag\",               \"site_name\")]) ##     altitude_final site_elevation elevation dataset_selection_tag ##              <num>          <num>     <num>                <char> ##  1:           17.1         611.43    611.43       allvalid-17magl ##  2:           31.7         611.43    611.43       allvalid-32magl ##  3:            4.9         611.43    611.43        allvalid-5magl ##  4:          122.0         472.00    472.00      allvalid-122magl ##  5:           30.0         472.00    472.00       allvalid-30magl ##  6:          396.0         472.00    472.00      allvalid-396magl ##  7:          304.8         115.20    115.20      allvalid-305magl ##  8:           31.0         115.20    115.20       allvalid-31magl ##  9:           61.0         115.20    115.20       allvalid-61magl ## 10:           30.0           2.00      2.00       allvalid-30magl ## 11:          484.0           2.00      2.00      allvalid-483magl ## 12:           89.1           2.00      2.00       allvalid-91magl ##                                                        site_name ##                                                           <char> ##  1: Carbon in Arctic Reservoirs Vulnerability Experiment (CARVE) ##  2: Carbon in Arctic Reservoirs Vulnerability Experiment (CARVE) ##  3: Carbon in Arctic Reservoirs Vulnerability Experiment (CARVE) ##  4:                                        Park Falls, Wisconsin ##  5:                                        Park Falls, Wisconsin ##  6:                                        Park Falls, Wisconsin ##  7:                                 Beech Island, South Carolina ##  8:                                 Beech Island, South Carolina ##  9:                                 Beech Island, South Carolina ## 10:                                     Walnut Grove, California ## 11:                                     Walnut Grove, California ## 12:                                     Walnut Grove, California dfa <- df[,           max(altitude_final),           by = site_code] |> unique()  names(dfa)[2] <- \"max_altitude\" dfa ##    site_code max_altitude ##       <char>        <num> ## 1:       CRV         31.7 ## 2:       LEF        396.0 ## 3:       SCT        304.8 ## 4:       WGC        484.0"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"key-time","dir":"","previous_headings":"ObsPack summary","what":"Key Time","title":"rtorf Obspack GLOBALView+","text":"need start time columns. function obs_addtime adds time columns timeUTC, timeUTC_start shows start time observation timeUTC_end shows end time observation. need key_time aggregate data. can done using UTC, solar, local time. normal approach using afternoon solar local time.","code":"df2 <- obs_addtime(df) ## Adding timeUTC ## Adding timeUTC_start ## Adding timeUTC_end ## Found time_interval"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"hierarchy-of-solar-or-local-time","dir":"","previous_headings":"ObsPack summary > Key Time","what":"Hierarchy of solar or local time","title":"rtorf Obspack GLOBALView+","text":"Solar time Local time columns site_utc2lst Local time longitude solar time (default) select hours interest aggregate data year, month day solar time. way, one information per day. however approach appropriate aircraft aggregated every 10 20 seconds. Hence need aggregate data one time column. Also, helps generate receptor info files including hour, minute second. Hence, need add solar local time column. local time column site_utc2lst need identify local time function add_ltime. important identifying observations evening local time. add_ltime uses two methods, first identify time difference utc identifying metadata column “site_utc2lst”. solar time available #now need cut solar time frequency needed. work local time longitude information available, aircrafts instance, local time calculated approximation based longitude: lt=UTC+longitude/15*60*60 lt = UTC + longitude/15 * 60 * 60  ltlt local time, UTCUTC time, longitudelongitude coordinate. , time cut every two hours. Now, identify local time select evening hours.","code":"df2$solar_time <- obs_addstime(df2)"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"cut-time","dir":"","previous_headings":"ObsPack summary > Key Time","what":"Cut time","title":"rtorf Obspack GLOBALView+","text":"Now key column time, can cut accordingly. can check solar time cut solar time. Please note solar_time_cut, column used aggregate data filter required solar time, case 14. Now 4316 observations filtering 112883. point can calculate averages several columns cut time. function obs_agg aggregation shown following lines code. argument gby establish function used aggregate cols. need aggregate data date (year, month, date), already filtered hours interest. , 1 observation per day. standard, let us define key_time solar_time. obs_agg function aggregate desired data column. Now 4316 observations, 108567 less observations. add column max_altitude identify max altitude site.","code":"df2$solar_time_cut <- cut(x = df2$solar_time,                           breaks = \"1 hour\") |>   as.character() df3 <- df2[hour_st %in% evening] df3[, c(\"solar_time\", \"solar_time_cut\")] ##                solar_time      solar_time_cut ##                    <POSc>              <char> ##    1: 2019-12-02 14:49:12 2019-12-02 14:00:00 ##    2: 2019-12-03 14:48:48 2019-12-03 14:00:00 ##    3: 2019-12-04 14:48:24 2019-12-04 14:00:00 ##    4: 2019-12-05 14:48:00 2019-12-05 14:00:00 ##    5: 2019-12-06 14:47:35 2019-12-06 14:00:00 ##   ---                                         ## 4312: 2021-01-27 14:11:38 2021-01-27 14:00:00 ## 4313: 2021-01-28 14:11:26 2021-01-28 14:00:00 ## 4314: 2021-01-29 14:11:14 2021-01-29 14:00:00 ## 4315: 2021-01-30 14:11:03 2021-01-30 14:00:00 ## 4316: 2021-01-31 14:10:52 2021-01-31 14:00:00 df3$key_time <- df3$solar_time_cut df4 <- obs_agg(dt = df3,                cols = c(\"value\",                         \"latitude\",                         \"longitude\"),                verbose = T,                byalt = TRUE) ## Selecting by alt ## Adding time df4[,     max_altitude := max(altitude_final),     by = site_code] df4[,     c(\"site_code\",       \"altitude_final\",       \"max_altitude\")] |> unique() ##     site_code altitude_final max_altitude ##        <char>          <num>        <num> ##  1:       CRV           17.1         31.7 ##  2:       CRV           31.7         31.7 ##  3:       CRV            4.9         31.7 ##  4:       LEF          122.0        396.0 ##  5:       LEF          396.0        396.0 ##  6:       LEF           30.0        396.0 ##  7:       SCT          304.8        304.8 ##  8:       SCT           31.0        304.8 ##  9:       SCT           61.0        304.8 ## 10:       WGC           30.0        484.0 ## 11:       WGC          484.0        484.0 ## 12:       WGC           89.1        484.0"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"saving-master-as-text-and-csvy","dir":"","previous_headings":"ObsPack summary","what":"Saving master as text and csvy","title":"rtorf Obspack GLOBALView+","text":"Now required information, can save files. , name data.frame master, contains information. important fields can used future, traceability. convenience, time variables transformed character writing disk. separation space ” “. format Comma Separated Value YAML (CSVY)[^3] consists typical CSV YAML header. functionobs_write_csvy includes argument notes allows adding custom notes header file. notes, obs_write_csvy adds output R function str, provides vertical summary data, known structure. check YAML header read first 38 lines files generated. can see column names, type data first observations. YAML header delimited characters “—”.","code":"master <- df4 master$timeUTC <- as.character(master$timeUTC) fwrite(master,         file =  paste0(tempdir(), \"/tower_insitu_2020.txt\"),        sep = \" \") csvy <- paste0(tempdir(), \"/tower_insitu_2020.csvy\") obs_write_csvy(dt = master,                notes = \"tower 2020\",                out = csvy ) readLines(csvy)[1:34] # and more"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"saving-receptors","dir":"","previous_headings":"ObsPack summary","what":"Saving receptors","title":"rtorf Obspack GLOBALView+","text":"need filter columns master files new object called receptors. needed internally run HYSPLIT [@hy] using information receptors. case tower, need select observations highest altitude. specific columns selected shown following code. selecting ending times, later HYSPLIT run backwards based time measurement, ending starting times. columns time formatted two characters. instance, month 1, formatted “01”. also need filter type_altitude equal 0, representing aglobservations , equal 1, asl.","code":"receptor <- master[altitude_final == max_altitude,                    c(\"site_code\",                      \"year\",                      \"month\",                      \"day\",                      \"hour\",                      \"minute\",                      \"second\",                      \"latitude\",                      \"longitude\",                      \"altitude_final\",                      \"type_altitude\",                      \"year_end\",                      \"month_end\",                      \"day_end\",                      \"hour_end\",                      \"minute_end\",                      \"second_end\",                      \"time_decimal\")]  receptor$altitude_final <- round(receptor$altitude_final)   receptor <- obs_format(receptor)  if(nrow(receptor_agl) > 0) {   fwrite(x = receptor_agl,          file = paste0(tempdir(), \"/receptor_tower_insitu_2020_AGL.txt\"),          sep = \" \")}  if(nrow(receptor_asl) > 0) {   fwrite(x = receptor_asl,          file = paste0(tempdir(), \"/receptor_tower_insitu_2020_ASL.txt\"),          sep = \" \")}"},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"application-for-other-sectors","dir":"","previous_headings":"","what":"Application for other sectors","title":"rtorf Obspack GLOBALView+","text":"package sharing scripts process sectors scripts available path https://github.com/ibarraespinosa/rtorf/tree/main/rscripts","code":""},{"path":"https://noaa-gml.github.io/rtorf/index.html","id":"implementation-in-python","dir":"","previous_headings":"","what":"Implementation in python:","title":"rtorf Obspack GLOBALView+","text":"’m currently implementing version python:","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/fex.html","id":null,"dir":"Reference","previous_headings":"","what":"File extension — fex","title":"File extension — fex","text":"file extension","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/fex.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"File extension — fex","text":"","code":"fex(x)"},{"path":"https://noaa-gml.github.io/rtorf/reference/fex.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"File extension — fex","text":"x character vector giving file paths.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/fex.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"File extension — fex","text":"source tools::file_ext","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/fex.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"File extension — fex","text":"","code":"if (FALSE) { # \\dontrun{ # do not run } # }"},{"path":"https://noaa-gml.github.io/rtorf/reference/invfile.html","id":null,"dir":"Reference","previous_headings":"","what":"Methods for objects with class `invfile` — print.invfile","title":"Methods for objects with class `invfile` — print.invfile","text":"Methods objects class `invfile`","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/invfile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Methods for objects with class `invfile` — print.invfile","text":"","code":"# S3 method for class 'invfile' print(x, ...)  # S3 method for class 'invfile' summary(object, ...)  # S3 method for class 'invfile' plot(x, time = \"timeUTC\", ...)"},{"path":"https://noaa-gml.github.io/rtorf/reference/invfile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Methods for objects with class `invfile` — print.invfile","text":"x Object class \"invfile\" ... plot arguments object invfile time x axis column (time)","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/invfile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Methods for objects with class `invfile` — print.invfile","text":"Objects class \"invfile\"","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/invfile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Methods for objects with class `invfile` — print.invfile","text":"","code":"if (FALSE) { # \\dontrun{ #do not run } # }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addltime.html","id":null,"dir":"Reference","previous_headings":"","what":"local hour (bsed on longitude and time) — obs_addltime","title":"local hour (bsed on longitude and time) — obs_addltime","text":"Calculate approximation local hour","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addltime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"local hour (bsed on longitude and time) — obs_addltime","text":"","code":"obs_addltime(   dt,   timeUTC = \"timeUTC\",   utc2lt = \"site_utc2lst\",   longitude = \"longitude\",   tz = \"UTC\" )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addltime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"local hour (bsed on longitude and time) — obs_addltime","text":"dt data.table timeUTC Character indicating Time column POSIXct utc2lt Character indicating integer column convert local time available longitude Character indicating column lingitude tz Timezone, default \"UTC\"","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addltime.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"local hour (bsed on longitude and time) — obs_addltime","text":"data.table local time columns","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addltime.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"local hour (bsed on longitude and time) — obs_addltime","text":"time depending n longitude John Miller (GML/NOAA)","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addltime.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"local hour (bsed on longitude and time) — obs_addltime","text":"","code":"{ if (FALSE) { # \\dontrun{ # Do not run } # } }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addstime.html","id":null,"dir":"Reference","previous_headings":"","what":"Add solar time into obspack — obs_addstime","title":"Add solar time into obspack — obs_addstime","text":"function add timeUTC POSIX class, local time ending sampling time","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addstime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add solar time into obspack — obs_addstime","text":"","code":"obs_addstime(dt, tz = \"UTC\")"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addstime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add solar time into obspack — obs_addstime","text":"dt obspack data.table tz Timezone, default \"UTC\"","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addstime.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add solar time into obspack — obs_addstime","text":"return data.frame adding solar time","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addstime.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add solar time into obspack — obs_addstime","text":"","code":"{ # Do not run obs <- system.file(\"data-raw\", package = \"rtorf\") index <-  obs_summary(obs) dt <- obs_read(index) dt <- obs_addtime(dt) } #> Number of files of index: 1 #>           sector     N #>           <char> <int> #> 1:         flask     1 #> 2: Total sectors     1 #> Detected 0 files with agl #> Detected 1 files without agl #> Searching flask... #> 1: ch4_aoa_aircraft-flask_19_allvalid.txt #> Adding timeUTC #> Adding timeUTC_start #> Adding timeUTC_end"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addtime.html","id":null,"dir":"Reference","previous_headings":"","what":"Add times into obspack — obs_addtime","title":"Add times into obspack — obs_addtime","text":"function add timeUTC POSIX class, local time ending sampling time","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addtime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add times into obspack — obs_addtime","text":"","code":"obs_addtime(dt, verbose = TRUE, tz = \"UTC\")"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addtime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add times into obspack — obs_addtime","text":"dt obspack data.table verbose obspack data.table tz Timezone, default \"UTC\"","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addtime.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add times into obspack — obs_addtime","text":"data.frame index obspack.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addtime.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Add times into obspack — obs_addtime","text":"timeUTC calculated based field column start_time, timeUTC_end calculated using approach: 1. column time_interval found, proceed calculation using midpoint_time 2. Else, use column time_interval","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_addtime.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add times into obspack — obs_addtime","text":"","code":"{ # Do not run obs <- system.file(\"data-raw\", package = \"rtorf\") index <-  obs_summary(obs) dt <- obs_read(index) dt <- obs_addtime(dt) } #> Number of files of index: 1 #>           sector     N #>           <char> <int> #> 1:         flask     1 #> 2: Total sectors     1 #> Detected 0 files with agl #> Detected 1 files without agl #> Searching flask... #> 1: ch4_aoa_aircraft-flask_19_allvalid.txt #> Adding timeUTC #> Adding timeUTC_start #> Adding timeUTC_end"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_agg.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregates ObsPack by time — obs_agg","title":"Aggregates ObsPack by time — obs_agg","text":"function add timeUTC POSIX class, local time ending sampling time","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_agg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregates ObsPack by time — obs_agg","text":"","code":"obs_agg(   dt,   cols = c(\"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\", \"time\", \"time_decimal\",     \"value\", \"latitude\", \"longitude\", \"altitude\", \"pressure\", \"u\", \"v\", \"temperature\",     \"type_altitude\"),   byalt = FALSE,   verbose = TRUE )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_agg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregates ObsPack by time — obs_agg","text":"dt obspack data.table cols Character defines columns aggregated byalt Logical, aggregate altitude (used tower) verbose logical show information","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_agg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregates ObsPack by time — obs_agg","text":"data.frame index obspack.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_agg.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Aggregates ObsPack by time — obs_agg","text":"default add column timeUTC based input column `key_time`","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_agg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Aggregates ObsPack by time — obs_agg","text":"","code":"if (FALSE) { # \\dontrun{ # Do not run # dt <- obs_addtime(dt) } # }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_find_receptors.html","id":null,"dir":"Reference","previous_headings":"","what":"Compares expected receptors — obs_find_receptors","title":"Compares expected receptors — obs_find_receptors","text":"function creates data.frame expected footprints .nc compare actual footprints. idea verify missing footprints.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_find_receptors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compares expected receptors — obs_find_receptors","text":"","code":"obs_find_receptors(   path,   year,   month,   day,   hour,   minute,   lat,   lon,   alt,   out = paste0(tempfile(), \".csvy\"),   verbose = FALSE )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_find_receptors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compares expected receptors — obs_find_receptors","text":"path String path hwere stored footprints year numeric number month numeric number day numeric number hour numeric number minute numeric number lat numeric number lon numeric number alt numeric number outfile path. verbose logical show information","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_find_receptors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compares expected receptors — obs_find_receptors","text":"data.frame expected footprints","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_find_receptors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compares expected receptors — obs_find_receptors","text":"","code":"if (FALSE) { # \\dontrun{ # do not run p <- \"/path/to/continuous/\" # here we have year/month/hysplit*.nc x <- dt dt <- obs_find_receptors(p, year, month....) } # }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_footname.html","id":null,"dir":"Reference","previous_headings":"","what":"Expected footprint name — obs_footname","title":"Expected footprint name — obs_footname","text":"return expected name NetCDF footprint","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_footname.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Expected footprint name — obs_footname","text":"","code":"obs_footname(year, month, day, hour, minute, lat, lon, alt, out, ...)"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_footname.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Expected footprint name — obs_footname","text":"year numeric number month numeric number day numeric number hour numeric number minute numeric number lat numeric number lon numeric number alt numeric number outfile path. ... data.table::fwrite arguments.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_footname.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Expected footprint name — obs_footname","text":"source https://stackoverflow.com//47015304/2418532 # IMPORTANT!!! # function generate expected NetCDF file name. # assumes name generated following considerations: # time variables (year, month, day, etc) format two digits, eg \"0.1\" # latitude longitude round 4 decimals # format latitude 2 integers, point 4 decimals # format longitude 3 integers, point 4 decimals # words, similar `obs_format`, `obs_footname`, generates expected name.","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_footname.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Expected footprint name — obs_footname","text":"","code":"if (FALSE) { # \\dontrun{ # do not run } # }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_format.html","id":null,"dir":"Reference","previous_headings":"","what":"Formatting data — obs_format","title":"Formatting data — obs_format","text":"return data.frame formatted fields","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_format.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Formatting data — obs_format","text":"","code":"obs_format(   dt,   spf = c(\"month\", \"day\", \"hour\", \"minute\", \"second\", \"month_end\", \"day_end\", \"hour_end\",     \"minute_end\", \"second_end\"),   spffmt = \"%02d\",   rnd = c(\"latitude\", \"longitude\"),   rndn = 4,   spfrnd = TRUE,   out,   ... )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_format.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Formatting data — obs_format","text":"dt `data.table` spf columns formatted `sprintf` spffmt format applied spf rnd columns round rndn Round number applied `rnd` spfrnd Logical, sprintf `rnd` columns round ? outfile path used data.table::fwrite. ... data.table::fwrite arguments.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_format.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Formatting data — obs_format","text":"source https://stackoverflow.com//47015304/2418532","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_format.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Formatting data — obs_format","text":"","code":"if (FALSE) { # \\dontrun{ # do not run } # }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_freq.html","id":null,"dir":"Reference","previous_headings":"","what":"return numeric vector in intervals — obs_freq","title":"return numeric vector in intervals — obs_freq","text":"return numeric vector intervals","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_freq.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"return numeric vector in intervals — obs_freq","text":"","code":"obs_freq(x, freq, ...)"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_freq.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"return numeric vector in intervals — obs_freq","text":"x numeric, longer `freq` freq numeric vector ... findInterval arguments","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_freq.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"return numeric vector in intervals — obs_freq","text":"numeric vector","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_invfiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate files to perform inverse modeling — obs_invfiles","title":"Generate files to perform inverse modeling — obs_invfiles","text":"function return list three elements.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_invfiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate files to perform inverse modeling — obs_invfiles","text":"","code":"obs_invfiles(   master,   nc = \"nc\",   path,   value = \"value\",   value_factor = 1e+09,   Type = \"continuous\",   SubType = \"tower-insitu\",   Surface_Elev = 99999,   Model_agl,   Data_agl,   Event = 99999,   Institution,   Scale,   outdir )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_invfiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate files to perform inverse modeling — obs_invfiles","text":"master data.table master file filtering obspack nc column name master indicate NetCDF footprints path first part full path .nc footprint files value column name pollutant value_factor numeric factor Type \"continuous\", \"flask\" \"hatsflask\" SubType \"aircraft-insitu\", \"tower-insitu\", \"surface-insitu\" Surface_Elev Site elevation, default 99999 Model_agl Model agl, missing column `altitude_final` Data_agl Model agl, missing column `altitude_final` Event Number event Institution Institution Scale Scale outdir String output dir","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_invfiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate files to perform inverse modeling — obs_invfiles","text":"list data.frame","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_invfiles.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate files to perform inverse modeling — obs_invfiles","text":"1. Footprints_hera_hysplit  full path NetCDF footprints\\ 2. Obs_hysplit concentration associazted iwth receptor 3. Receptor_info_hysplit receptor info","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_invfiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate files to perform inverse modeling — obs_invfiles","text":"","code":"if (FALSE) { # \\dontrun{ # do not run } # }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_list.dt.html","id":null,"dir":"Reference","previous_headings":"","what":"list.dt — obs_list.dt","title":"list.dt — obs_list.dt","text":"treatments list data.frames","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_list.dt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"list.dt — obs_list.dt","text":"","code":"obs_list.dt(ldf, na, verbose = TRUE)"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_list.dt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"list.dt — obs_list.dt","text":"ldf list data.frames na common names final data.frame verbose Logical show information","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_list.dt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"list.dt — obs_list.dt","text":"long data.table","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_list.dt.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"list.dt — obs_list.dt","text":"1. Filter empty data.frames 2. identify common names 3. rbindlist return data.table","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_list.dt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"list.dt — obs_list.dt","text":"","code":"{ if (FALSE) { # \\dontrun{ # Do not run } # } }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_meta.html","id":null,"dir":"Reference","previous_headings":"","what":"Read obspack metadata — obs_meta","title":"Read obspack metadata — obs_meta","text":"Read obspack metadata","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_meta.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read obspack metadata — obs_meta","text":"","code":"obs_meta(   index,   verbose = TRUE,   n_site_code = 15,   n_site_name = 15,   n_site_latitude = 18,   n_site_longitude = 19,   n_site_country = 18,   n_dataset_project = 21,   n_lab = 16,   n_scales = 31,   n_site_elevation = 20,   n_altitude_comment = 22,   n_utc = 18,   fill_value = -1e+34,   as_list = FALSE )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_meta.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read obspack metadata — obs_meta","text":"index data.table verbose Logical show information n_site_code number characters extraced metadata search n_site_name number characters extraced metadata search n_site_latitude number characters extraced metadata search n_site_longitude number characters extraced metadata search n_site_country number characters extraced metadata search n_dataset_project number characters extraced metadata search n_lab number characters extraced metadata search n_scales number characters extraced metadata search n_site_elevation number characters extraced metadata search n_altitude_comment number characters extraced metadata search n_utc number characters extraced metadata search fill_value fill value. Appeared aoa_aircraft-flask_19_allvalid.txt as_list Logical return list","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_meta.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read obspack metadata — obs_meta","text":"data.frame index obspack.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_meta.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read obspack metadata — obs_meta","text":"","code":"{ # Do not run obs <- system.file(\"data-raw\", package = \"rtorf\") index <- obs_summary(obs) dt <- obs_meta(index) } #> Number of files of index: 1 #>           sector     N #>           <char> <int> #> 1:         flask     1 #> 2: Total sectors     1 #> Detected 0 files with agl #> Detected 1 files without agl #> 1: ch4_aoa_aircraft-flask_19_allvalid.txt"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_out.html","id":null,"dir":"Reference","previous_headings":"","what":"outersect — obs_out","title":"outersect — obs_out","text":"Just opposite intersect","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_out.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"outersect — obs_out","text":"","code":"obs_out(x, y)"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_out.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"outersect — obs_out","text":"x vector y vector","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_out.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"outersect — obs_out","text":"vector opposite intersect","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_out.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"outersect — obs_out","text":"Helpers","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_out.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"outersect — obs_out","text":"","code":"{ if (FALSE) { # \\dontrun{ # Do not run } # } }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Read obspack metadata — obs_plot","title":"Read obspack metadata — obs_plot","text":"Read obspack metadata","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read obspack metadata — obs_plot","text":"","code":"obs_plot(   dt,   time,   y = \"value\",   yfactor = 1,   colu = \"site_code\",   type = \"p\",   n = if (length(unique(dt[[colu]])) == 1) unique(dt[[colu]]) else     unique(dt[[colu]])[1:2],   pal = cptcity::find_cpt(\"qual\")[6],   verbose = TRUE,   xlab = \"time\",   ylab = \"value\",   xlim = range(dt[[time]], na.rm = TRUE),   ylim = range(dt[[y]], na.rm = TRUE),   ... )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read obspack metadata — obs_plot","text":"dt data.table time x axis column (time) y y axis column, default \"value\" yfactor factor y colu column plot color, default site_code type type plot, default \"p\" n Character indicating `colu` subset, instance, want plot \"site_code\", include site_code want plot pal Color palette name see cpt, default \"cb_qual_Accent_08\" verbose Logical show information xlab Character, xlab ylab Character, ylab xlim x limits ylim y limits ... plot arguments","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read obspack metadata — obs_plot","text":"Plot","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read obspack metadata — obs_plot","text":"","code":"if (FALSE) { # \\dontrun{ # Do not run obs <- system.file(\"data-raw\", package = \"rtorf\") index <- obs_summary(obs) dt <- obs_read(index) obs_plot(dt, time = \"time\") } # }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_rbind.html","id":null,"dir":"Reference","previous_headings":"","what":"rbind obspack — obs_rbind","title":"rbind obspack — obs_rbind","text":"return rbind obs data.tables","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_rbind.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"rbind obspack — obs_rbind","text":"","code":"obs_rbind(dt1, dt2, verbose = TRUE)"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_rbind.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"rbind obspack — obs_rbind","text":"dt1 first data.table dt2 second data.table verbose logical show information","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_rbind.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"rbind obspack — obs_rbind","text":"numeric vector","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_rbind.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"rbind obspack — obs_rbind","text":"","code":"if (FALSE) { # \\dontrun{ # do not run } # }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read.html","id":null,"dir":"Reference","previous_headings":"","what":"Read obspack (.txt) — obs_read","title":"Read obspack (.txt) — obs_read","text":"obspack file header metadata function reads selected fields metadata add columns. new columns used later filtered","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read obspack (.txt) — obs_read","text":"","code":"obs_read(   index,   categories = \"flask\",   expr = NULL,   verbose = TRUE,   n_site_code = 15,   n_site_latitude = 18,   n_site_longitude = 19,   n_site_name = 15,   n_site_country = 18,   n_dataset_project = 21,   n_lab = 16,   n_scales = 31,   n_site_elevation = 20,   n_altitude_comment = 22,   n_utc = 18,   fill_value = -1e+34,   as_list = FALSE )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read obspack (.txt) — obs_read","text":"index data.table categories character; ONE category : c(\"aircraft-pfp\", \"aircraft-insitu\", \"surface-insitu\", \"tower-insitu\", \"aircore\", \"surface-pfp\", \"shipboard-insitu\", \"flask\"). expr String expressions filter data.table internally verbose Logical show information n_site_code number characters extratced metadata search n_site_latitude number characters extracted metadata search n_site_longitude number characters extracted metadata search n_site_name number characters extracted metadata search n_site_country number characters extracted metadata search n_dataset_project number characters extracted metadata search n_lab number characters extracted metadata search n_scales number characters extracted metadata search n_site_elevation number characters extracted metadata search n_altitude_comment number characters extracted metadata search n_utc number characters extracted metadata search fill_value fill value. Appeared aoa_aircraft-flask_19_allvalid.txt as_list Logical return list","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read obspack (.txt) — obs_read","text":"data.frame index obspack.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Read obspack (.txt) — obs_read","text":"identification altitude type critical. approach used consists : 1. Identify agl name tile. 2. magl present, search dill_values used elevation transform NA (available) 3. magl present, agl = altitude - elevation 4. NA elevation, result NA agl 5. new column added named `altitude_final` store agl asl 6. Another column named `type_altitude` added identify \"magl\" \"masl\" 7. case NA `altitude_final`, `type_altitude` \"available\" , relationship hysplit :","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read obspack (.txt) — obs_read","text":"","code":"{ # Do not run obs <- system.file(\"data-raw\", package = \"rtorf\") index <- obs_summary(obs) dt <- obs_read(index) obs_read(index, expr = \"altitude_final == '5800'\") } #> Number of files of index: 1 #>           sector     N #>           <char> <int> #> 1:         flask     1 #> 2: Total sectors     1 #> Detected 0 files with agl #> Detected 1 files without agl #> Searching flask... #> 1: ch4_aoa_aircraft-flask_19_allvalid.txt #> Searching flask... #> 1: ch4_aoa_aircraft-flask_19_allvalid.txt #>       year month   day  hour minute second       time start_time midpoint_time #>      <int> <int> <int> <int>  <int>  <int>      <int>      <int>         <int> #>   1:  2011     2    16     2     17     30 1297822650 1297822440    1297822650 #>   2:  2011     2    16     2     26     30 1297823190 1297822980    1297823190 #>   3:  2011     2    16     2     33     30 1297823610 1297823400    1297823610 #>   4:  2011     2    16     2     40     30 1297824030 1297823820    1297824030 #>   5:  2011     2    16     2     47     30 1297824450 1297824240    1297824450 #>  ---                                                                           #> 226:  2019     3    14     2     15     30 1552529730 1552529520    1552529730 #> 227:  2019     3    14     2     22     30 1552530150 1552529940    1552530150 #> 228:  2019     5    15     5     10     30 1557897030 1557896820    1557897030 #> 229:  2019     9     4     7     54     30 1567583670 1567583460    1567583670 #> 230:  2020     3    10     6     42     30 1583822550 1583822340    1583822550 #>      time_decimal      value nvalue latitude longitude altitude elevation #>             <num>      <num>  <int>    <num>     <num>    <num>     <num> #>   1:     2011.126 1.8464e-06      1   34.429   141.037     5800  -999.999 #>   2:     2011.126 1.8428e-06      1   34.058   141.830     5800  -999.999 #>   3:     2011.126 1.8502e-06      1   33.770   142.447     5800  -999.999 #>   4:     2011.126 1.8477e-06      1   33.480   143.052     5800  -999.999 #>   5:     2011.126 1.8393e-06      1   33.162   143.708     5800  -999.999 #>  ---                                                                      #> 226:     2019.198 1.9945e-06      1   33.249   143.529     5800  -999.999 #> 227:     2019.198 1.9745e-06      1   32.885   144.267     5800  -999.999 #> 228:     2019.368 1.8902e-06      1   24.819   152.060     5800  -999.999 #> 229:     2019.675 1.8798e-06      1   24.327   152.091     5800  -999.999 #> 230:     2020.189 1.9433e-06      1   24.885   151.834     5800  -999.999 #>      intake_height qcflag method unique_sample_location_num obs_flag obs_num #>              <num>  <int>  <int>                      <int>    <int>   <int> #>   1:      -999.999      1     18                    8768042        1       1 #>   2:      -999.999      1     18                    8767980        1       2 #>   3:      -999.999      1     18                    8767880        1       3 #>   4:      -999.999      1     18                    8767781        1       4 #>   5:      -999.999      1     18                    8767708        1       5 #>  ---                                                                         #> 226:      -999.999      1     18                    8767761        1    2278 #> 227:      -999.999      1     18                    8767655        1    2279 #> 228:      -999.999      1     18                    8766225        1    2339 #> 229:      -999.999      1     18                    8765601        1    2441 #> 230:      -999.999      1     18                   44498114        1    2573 #>      obspack_num #>            <int> #>   1:     5536255 #>   2:     5536256 #>   3:     5536257 #>   4:     5536258 #>   5:     5536259 #>  ---             #> 226:     5538532 #> 227:     5538533 #> 228:     5538593 #> 229:     5538695 #> 230:     5538827 #>                                                                                   obspack_id #>                                                                                       <char> #>   1: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5536255 #>   2: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5536256 #>   3: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5536257 #>   4: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5536258 #>   5: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5536259 #>  ---                                                                                         #> 226: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5538532 #> 227: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5538533 #> 228: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5538593 #> 229: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5538695 #> 230: obspack_ch4_1_GLOBALVIEWplus_v4.0_2021-10-14~ch4_aoa_aircraft-flask_19_allvalid~5538827 #>                                        name sector site_code #>                                      <char> <char>    <char> #>   1: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #>   2: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #>   3: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #>   4: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #>   5: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #>  ---                                                         #> 226: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #> 227: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #> 228: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #> 229: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #> 230: ch4_aoa_aircraft-flask_19_allvalid.txt  flask       AOA #>                                                   site_name site_country #>                                                      <char>       <char> #>   1: Aircraft Observation of Atmospheric trace gases by JMA        Japan #>   2: Aircraft Observation of Atmospheric trace gases by JMA        Japan #>   3: Aircraft Observation of Atmospheric trace gases by JMA        Japan #>   4: Aircraft Observation of Atmospheric trace gases by JMA        Japan #>   5: Aircraft Observation of Atmospheric trace gases by JMA        Japan #>  ---                                                                     #> 226: Aircraft Observation of Atmospheric trace gases by JMA        Japan #> 227: Aircraft Observation of Atmospheric trace gases by JMA        Japan #> 228: Aircraft Observation of Atmospheric trace gases by JMA        Japan #> 229: Aircraft Observation of Atmospheric trace gases by JMA        Japan #> 230: Aircraft Observation of Atmospheric trace gases by JMA        Japan #>      site_elevation site_latitude site_longitude dataset_project lab_1_abbr #>              <lgcl>        <char>         <char>          <char>     <char> #>   1:             NA        -1e+34         -1e+34  aircraft-flask        JMA #>   2:             NA        -1e+34         -1e+34  aircraft-flask        JMA #>   3:             NA        -1e+34         -1e+34  aircraft-flask        JMA #>   4:             NA        -1e+34         -1e+34  aircraft-flask        JMA #>   5:             NA        -1e+34         -1e+34  aircraft-flask        JMA #>  ---                                                                        #> 226:             NA        -1e+34         -1e+34  aircraft-flask        JMA #> 227:             NA        -1e+34         -1e+34  aircraft-flask        JMA #> 228:             NA        -1e+34         -1e+34  aircraft-flask        JMA #> 229:             NA        -1e+34         -1e+34  aircraft-flask        JMA #> 230:             NA        -1e+34         -1e+34  aircraft-flask        JMA #>      dataset_calibration_scale #>                         <char> #>   1:            WMO CH4 X2004A #>   2:            WMO CH4 X2004A #>   3:            WMO CH4 X2004A #>   4:            WMO CH4 X2004A #>   5:            WMO CH4 X2004A #>  ---                           #> 226:            WMO CH4 X2004A #> 227:            WMO CH4 X2004A #> 228:            WMO CH4 X2004A #> 229:            WMO CH4 X2004A #> 230:            WMO CH4 X2004A #>                                                              altitude_comment #>                                                                        <char> #>   1: Altitude (in meters above sea level). See provider_comment if available. #>   2: Altitude (in meters above sea level). See provider_comment if available. #>   3: Altitude (in meters above sea level). See provider_comment if available. #>   4: Altitude (in meters above sea level). See provider_comment if available. #>   5: Altitude (in meters above sea level). See provider_comment if available. #>  ---                                                                          #> 226: Altitude (in meters above sea level). See provider_comment if available. #> 227: Altitude (in meters above sea level). See provider_comment if available. #> 228: Altitude (in meters above sea level). See provider_comment if available. #> 229: Altitude (in meters above sea level). See provider_comment if available. #> 230: Altitude (in meters above sea level). See provider_comment if available. #>      site_utc2lst   agl type_altitude altitude_final    id #>             <num> <num>         <num>          <num> <int> #>   1:            9    NA             1           5800     1 #>   2:            9    NA             1           5800     1 #>   3:            9    NA             1           5800     1 #>   4:            9    NA             1           5800     1 #>   5:            9    NA             1           5800     1 #>  ---                                                       #> 226:            9    NA             1           5800     1 #> 227:            9    NA             1           5800     1 #> 228:            9    NA             1           5800     1 #> 229:            9    NA             1           5800     1 #> 230:            9    NA             1           5800     1"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read_csvy.html","id":null,"dir":"Reference","previous_headings":"","what":"reads CSVY — obs_read_csvy","title":"reads CSVY — obs_read_csvy","text":"Reads CSVY, print YAML fread file.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read_csvy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"reads CSVY — obs_read_csvy","text":"","code":"obs_read_csvy(f, n = 100, ...)"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read_csvy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"reads CSVY — obs_read_csvy","text":"f path csvy file n number files search \"—\" yaml ... extra data.table arguments","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read_csvy.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"reads CSVY — obs_read_csvy","text":"","code":"{ df <- data.frame(a = rnorm(n = 10),                  time = Sys.time() + 1:10)  f <- paste0(tempfile(), \".csvy\") notes <- c(\"notes\",            \"more notes\") obs_write_csvy(dt = df, notes = notes, out = f) s <- obs_read_csvy(f) s # or readLines(f) data.table::fread(f) } #>  [1] \"---\"                                                   #>  [2] \"name: Metadata \"                                       #>  [3] \"notes\"                                                 #>  [4] \"more notes\"                                            #>  [5] \"structure: \"                                           #>  [6] \"'data.frame':\\t10 obs. of  2 variables:\"               #>  [7] \" $ a   : num  -1.4 0.255 ...\"                          #>  [8] \" $ time: POSIXct, format: \\\"2024-08-22 02:03:31\\\" ...\" #>  [9] \"NULL\"                                                  #> [10] \"---\"                                                   #>                a                time #>            <num>              <POSc> #>  1: -1.400043517 2024-08-22 02:03:31 #>  2:  0.255317055 2024-08-22 02:03:32 #>  3: -2.437263611 2024-08-22 02:03:33 #>  4: -0.005571287 2024-08-22 02:03:34 #>  5:  0.621552721 2024-08-22 02:03:35 #>  6:  1.148411606 2024-08-22 02:03:36 #>  7: -1.821817661 2024-08-22 02:03:37 #>  8: -0.247325302 2024-08-22 02:03:38 #>  9: -0.244199607 2024-08-22 02:03:39 #> 10: -0.282705449 2024-08-22 02:03:40"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read_nc.html","id":null,"dir":"Reference","previous_headings":"","what":"Read obspack (.nc) — obs_read_nc","title":"Read obspack (.nc) — obs_read_nc","text":"obspack file header metadata function reads selected fields metadata add columns. new columns used later filtered","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read_nc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read obspack (.nc) — obs_read_nc","text":"","code":"obs_read_nc(   index,   categories = \"flask\",   att = FALSE,   expr = NULL,   solar_time = TRUE,   as_list = FALSE,   verbose = FALSE,   warnings = FALSE )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read_nc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read obspack (.nc) — obs_read_nc","text":"index data.table categories character; ONE category : c(\"aircraft-pfp\", \"aircraft-insitu\", \"surface-insitu\", \"tower-insitu\", \"aircore\", \"surface-pfp\", \"shipboard-insitu\", \"flask\"). att Logical, global attributes added data.table expr String expressions filter data.table internally solar_time Logical, add solar time? as_list Logical return list verbose Logical show information warnings Logical show warnings reading NetCDF, especially global attributes","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read_nc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read obspack (.nc) — obs_read_nc","text":"data.frame index obspack.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_read_nc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read obspack (.nc) — obs_read_nc","text":"","code":"{ # Do not run obs <- system.file(\"data-raw\", package = \"rtorf\") index <- obs_summary(obs) dt <- obs_read(index) } #> Number of files of index: 1 #>           sector     N #>           <char> <int> #> 1:         flask     1 #> 2: Total sectors     1 #> Detected 0 files with agl #> Detected 1 files without agl #> Searching flask... #> 1: ch4_aoa_aircraft-flask_19_allvalid.txt"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_roundtime.html","id":null,"dir":"Reference","previous_headings":"","what":"round seconds from ","title":"round seconds from ","text":"return rounded seconds time","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_roundtime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"round seconds from ","text":"","code":"obs_roundtime(x, n = 10)"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_roundtime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"round seconds from ","text":"x time \"POSIXct\" \"POSIXt\" n factor","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_roundtime.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"round seconds from ","text":"numeric vector","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_roundtime.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"round seconds from ","text":"","code":"{ x <- Sys.time() + seq(1, 55, 1) paste0(x,\"  \",        obs_roundtime(x), \"  \",        obs_freq(data.table::second(x),                 seq(0, 55, 10))) } #>  [1] \"2024-08-22 02:03:32.228815  30  30\" \"2024-08-22 02:03:33.228815  30  30\" #>  [3] \"2024-08-22 02:03:34.228815  30  30\" \"2024-08-22 02:03:35.228815  30  30\" #>  [5] \"2024-08-22 02:03:36.228815  30  30\" \"2024-08-22 02:03:37.228815  30  30\" #>  [7] \"2024-08-22 02:03:38.228815  40  30\" \"2024-08-22 02:03:39.228815  40  30\" #>  [9] \"2024-08-22 02:03:40.228815  40  30\" \"2024-08-22 02:03:41.228815  40  40\" #> [11] \"2024-08-22 02:03:42.228815  40  40\" \"2024-08-22 02:03:43.228815  40  40\" #> [13] \"2024-08-22 02:03:44.228815  40  40\" \"2024-08-22 02:03:45.228815  40  40\" #> [15] \"2024-08-22 02:03:46.228815  40  40\" \"2024-08-22 02:03:47.228815  40  40\" #> [17] \"2024-08-22 02:03:48.228815  50  40\" \"2024-08-22 02:03:49.228815  50  40\" #> [19] \"2024-08-22 02:03:50.228815  50  40\" \"2024-08-22 02:03:51.228815  50  50\" #> [21] \"2024-08-22 02:03:52.228815  50  50\" \"2024-08-22 02:03:53.228815  50  50\" #> [23] \"2024-08-22 02:03:54.228815  50  50\" \"2024-08-22 02:03:55.228815  50  50\" #> [25] \"2024-08-22 02:03:56.228815  50  50\" \"2024-08-22 02:03:57.228815  50  50\" #> [27] \"2024-08-22 02:03:58.228815  0  50\"  \"2024-08-22 02:03:59.228815  0  50\"  #> [29] \"2024-08-22 02:04:00.228815  0  0\"   \"2024-08-22 02:04:01.228815  0  0\"   #> [31] \"2024-08-22 02:04:02.228815  0  0\"   \"2024-08-22 02:04:03.228815  0  0\"   #> [33] \"2024-08-22 02:04:04.228815  0  0\"   \"2024-08-22 02:04:05.228815  0  0\"   #> [35] \"2024-08-22 02:04:06.228815  0  0\"   \"2024-08-22 02:04:07.228815  0  0\"   #> [37] \"2024-08-22 02:04:08.228815  10  0\"  \"2024-08-22 02:04:09.228815  10  0\"  #> [39] \"2024-08-22 02:04:10.228815  10  0\"  \"2024-08-22 02:04:11.228815  10  10\" #> [41] \"2024-08-22 02:04:12.228815  10  10\" \"2024-08-22 02:04:13.228815  10  10\" #> [43] \"2024-08-22 02:04:14.228815  10  10\" \"2024-08-22 02:04:15.228815  10  10\" #> [45] \"2024-08-22 02:04:16.228815  10  10\" \"2024-08-22 02:04:17.228815  10  10\" #> [47] \"2024-08-22 02:04:18.228815  20  10\" \"2024-08-22 02:04:19.228815  20  10\" #> [49] \"2024-08-22 02:04:20.228815  20  10\" \"2024-08-22 02:04:21.228815  20  20\" #> [51] \"2024-08-22 02:04:22.228815  20  20\" \"2024-08-22 02:04:23.228815  20  20\" #> [53] \"2024-08-22 02:04:24.228815  20  20\" \"2024-08-22 02:04:25.228815  20  20\" #> [55] \"2024-08-22 02:04:26.228815  20  20\""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary of the ObsPack files (.txt) — obs_summary","title":"Summary of the ObsPack files (.txt) — obs_summary","text":"function returns data.frame index files available ObsPack. function returns data.frame index files available obspack.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary of the ObsPack files (.txt) — obs_summary","text":"","code":"obs_summary(   obs,   categories = c(\"aircraft-pfp\", \"aircraft-insitu\", \"surface-insitu\", \"tower-insitu\",     \"aircore\", \"surface-pfp\", \"shipboard-insitu\", \"flask\"),   lnchar = 11,   out = paste0(tempfile(), \"_index.csv\"),   verbose = TRUE,   aslist = FALSE )  obs_index(   obs,   categories = c(\"aircraft-pfp\", \"aircraft-insitu\", \"surface-insitu\", \"tower-insitu\",     \"aircore\", \"surface-pfp\", \"shipboard-insitu\", \"flask\"),   lnchar = 11,   out = paste0(tempfile(), \"_index.csv\"),   verbose = TRUE )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary of the ObsPack files (.txt) — obs_summary","text":"obs Path Obspack GLOBALview txt data categories character; default c(\"aircraft-pfp\", \"aircraft-insitu\", \"surface-insitu\", \"tower-insitu\", \"aircore\", \"surface-pfp\", \"shipboard-insitu\", \"flask\"). ideia ,file names include words, function identifies files words add columns. lnchar Integer; last nchar, default = 11. Path Obspack index output verbose Logical show information aslist Logical return list index summary","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary of the ObsPack files (.txt) — obs_summary","text":"data.frame index obspack Globalview. data.frame index obspack Globalview.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summary of the ObsPack files (.txt) — obs_summary","text":"","code":"{ if (FALSE) { # \\dontrun{ # Do not run obs <- system.file(\"data-raw\", package = \"rtorf\") index <- obs_summary(obs) } # } } { if (FALSE) { # \\dontrun{ # Do not run obs <- system.file(\"data-raw\", package = \"rtorf\") index <- obs_summary(obs) } # } }"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Obspack Table Summary — obs_table","title":"Obspack Table Summary — obs_table","text":"function reads obsPack directory providing summary columns: \"value\", \"time\", \"time_decimal\", \"latitude\" \"longitude\". summary made columns \"name\", \"sector\", \"site_name\", \"site_country\", \"type_altitude\", \"lab_1_abbr\" \"site_utc2lst\"","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Obspack Table Summary — obs_table","text":"","code":"obs_table(   df,   cols = c(\"value\", \"time\", \"time_decimal\", \"latitude\", \"longitude\") )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Obspack Table Summary — obs_table","text":"df data.table cols String columns summarized.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Obspack Table Summary — obs_table","text":"data.frame index obspack.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_table.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Obspack Table Summary — obs_table","text":"","code":"{ # Do not run obs <- system.file(\"data-raw\", package = \"rtorf\") index <- obs_summary(obs) dt <- obs_read(index) dx <- obs_table(dt) } #> Number of files of index: 1 #>           sector     N #>           <char> <int> #> 1:         flask     1 #> 2: Total sectors     1 #> Detected 0 files with agl #> Detected 1 files without agl #> Searching flask... #> 1: ch4_aoa_aircraft-flask_19_allvalid.txt"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_trunc.html","id":null,"dir":"Reference","previous_headings":"","what":"Trunc numbers with a desired number of decimals — obs_trunc","title":"Trunc numbers with a desired number of decimals — obs_trunc","text":"Trunc numbers specified number decimals.","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_trunc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trunc numbers with a desired number of decimals — obs_trunc","text":"","code":"obs_trunc(n, dec)"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_trunc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trunc numbers with a desired number of decimals — obs_trunc","text":"n Numeric  number dec Integer, number decimals","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_trunc.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Trunc numbers with a desired number of decimals — obs_trunc","text":"source https://stackoverflow.com//47015304/2418532","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_trunc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Trunc numbers with a desired number of decimals — obs_trunc","text":"","code":"{ # in bash: # printf \"%07.4f\" 72.05785 # results in 72.0578 # but: formatC(72.05785, digits = 4, width = 8, format = \"f\", flag = \"0\") # results in \"072.0579\" # the goal is to obtain the same trunc number as using bash, then: formatC(obs_trunc(72.05785, 4),         digits = 4,         width = 8,         format = \"f\",         flag = \"0\") } #> [1] \"072.0578\""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_write_csvy.html","id":null,"dir":"Reference","previous_headings":"","what":"Generates YAML and write data.frame — obs_write_csvy","title":"Generates YAML and write data.frame — obs_write_csvy","text":"Add YAML header info writes data.frame disk. YAML section includes notes str(dt).","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_write_csvy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generates YAML and write data.frame — obs_write_csvy","text":"","code":"obs_write_csvy(   dt,   notes,   out = paste0(tempfile(), \".csvy\"),   sep = \",\",   nchar.max = 80,   ... )"},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_write_csvy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generates YAML and write data.frame — obs_write_csvy","text":"dt data.table notes notes. outfile path. sep separator columns. Default \",\". nchar.max Max nchar str. ... extra data.table arguments","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/obs_write_csvy.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generates YAML and write data.frame — obs_write_csvy","text":"","code":"{ df <- data.frame(a = rnorm(n = 10),                  time = Sys.time() + 1:10)  f <- paste0(tempfile(), \".csvy\") notes <- c(\"notes\",            \"more notes\") obs_write_csvy(dt = df, notes = notes, out = f) readLines(f) data.table::fread(f, h = TRUE) } #>               a                time #>           <num>              <POSc> #>  1: -0.55369938 2024-08-22 02:03:32 #>  2:  0.62898204 2024-08-22 02:03:33 #>  3:  2.06502490 2024-08-22 02:03:34 #>  4: -1.63098940 2024-08-22 02:03:35 #>  5:  0.51242695 2024-08-22 02:03:36 #>  6: -1.86301149 2024-08-22 02:03:37 #>  7: -0.52201251 2024-08-22 02:03:38 #>  8: -0.05260191 2024-08-22 02:03:39 #>  9:  0.54299634 2024-08-22 02:03:40 #> 10: -0.91407483 2024-08-22 02:03:41"},{"path":"https://noaa-gml.github.io/rtorf/reference/rtorf-deprecated.html","id":null,"dir":"Reference","previous_headings":"","what":"Deprecated functions in package rtorf. — rtorf-deprecated","title":"Deprecated functions in package rtorf. — rtorf-deprecated","text":"functions listed deprecated defunct   near future. possible, alternative functions similar   functionality also mentioned. Help pages deprecated functions   available help(\"-deprecated\"). transform integer character add zero left","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/rtorf-deprecated.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deprecated functions in package rtorf. — rtorf-deprecated","text":"","code":"obs_addzero(x, ...)"},{"path":"https://noaa-gml.github.io/rtorf/reference/rtorf-deprecated.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deprecated functions in package rtorf. — rtorf-deprecated","text":"x integer","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/rtorf-deprecated.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Deprecated functions in package rtorf. — rtorf-deprecated","text":"","code":"{if (FALSE) { # \\dontrun{ #do not run } # } }"},{"path":"https://noaa-gml.github.io/rtorf/reference/rtorf-package.html","id":null,"dir":"Reference","previous_headings":"","what":"rtorf: 'rtorf' Obspack GLOBALView+ — rtorf-package","title":"rtorf: 'rtorf' Obspack GLOBALView+ — rtorf-package","text":"Reads, process, plots CH4 ObsPack GLOBALView+ data NOAA perform different filters analyses.","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/rtorf-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"rtorf: 'rtorf' Obspack GLOBALView+ — rtorf-package","text":"Maintainer: Sergio Ibarra-Espinosa sergio.ibarra-espinosa@noaa.gov (ORCID) contributors: Lei Hu lei.hu@noaa.gov (ORCID) [contributor]","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/sr.html","id":null,"dir":"Reference","previous_headings":"","what":"Extacts n last characters — sr","title":"Extacts n last characters — sr","text":"file extension","code":""},{"path":"https://noaa-gml.github.io/rtorf/reference/sr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extacts n last characters — sr","text":"","code":"sr(x, n)"},{"path":"https://noaa-gml.github.io/rtorf/reference/sr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extacts n last characters — sr","text":"x character vector. n integer.","code":""},{"path":[]},{"path":"https://noaa-gml.github.io/rtorf/reference/sr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extacts n last characters — sr","text":"","code":"if (FALSE) { # \\dontrun{ # do not run } # }"}]
